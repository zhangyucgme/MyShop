<?php if(!function_exists('tpl_input_textarea')){ require(CORE_DIR.'/include_v5/smartyplugins/input.textarea.php'); } if(!function_exists('tpl_input_default')){ require(CORE_DIR.'/include_v5/smartyplugins/input.default.php'); } if(!function_exists('tpl_input_select')){ require(CORE_DIR.'/include_v5/smartyplugins/input.select.php'); }  foreach ((array)$this->_vars['minfo'] as $this->_vars['product_id'] => $this->_vars['product']){ ?> <div class='FormWrap'> <h3>填写购买&nbsp;&nbsp;<?php echo $this->_vars['product']['name'];  if( $this->_vars['product']['nums']>1 ){ ?> x <?php echo $this->_vars['product']['nums'];  } ?>&nbsp;&nbsp;时所需信息</h3> <div class="field section"> <div class="division"> <table width="100%" cellspacing="0" cellpadding="0" border="0" class="liststyle data"> <col class="span-5"></col> <col></col> <tbody> <?php foreach ((array)$this->_vars['product']['minfo'] as $this->_vars['key'] => $this->_vars['info']){  $this->_vars["infokey"]=$this->_vars['info']['name']; ?> <tr> <th> <em style="color: red;">*</em><label for="misc_<?php echo $this->_vars['key']; ?>"><?php echo $this->_vars['info']['label']; ?>：</label> <input type="hidden" name="minfo[<?php echo $this->_vars['product_id']; ?>][<?php echo $this->_vars['info']['name']; ?>][label]" value="<?php echo $this->_vars['info']['label']; ?>"> </th> <td> <?php if( $this->_vars['info']['type']=='select' ){ ?> <select class="inputstyle x-input" name="minfo[<?php echo $this->_vars['product_id']; ?>][<?php echo $this->_vars['info']['name']; ?>][value]"> <?php foreach ((array)$this->_vars['info']['options'] as $this->_vars['opt']){ ?> <option value="<?php echo $this->_vars['opt']; ?>"><?php echo $this->_vars['opt']; ?></option> <?php } ?> </select> <?php }elseif( $this->_vars['info']['type']=='text' ){  echo tpl_input_textarea(array('class' => "inputstyle x-input",'rows' => "3",'cols' => "40",'id' => "misc_{$this->_vars['key']}",'name' => "minfo[{$this->_vars['product_id']}][{$this->_vars['infokey']}][value]",'vtype' => "required"), $this); }else{  echo tpl_input_default(array('class' => "inputstyle",'id' => "misc_{$this->_vars['key']}",'size' => "30",'name' => "minfo[{$this->_vars['product_id']}][{$this->_vars['infokey']}][value]",'type' => 'required'), $this); } ?> </td> </tr> <?php } ?> </tbody> </table> </div> </div> </div> <?php } ?> <div class="FormWrap checkoutbase" > <table width="100%" cellpadding="0" cellspacing="0"> <tbody> <tr> <td width='100' style='vertical-align:middle;white-space:nowrap;'><h3>收货信息确认</h3></td> <td><?php $_tpl_tpl_vars = $this->_vars; echo $this->_fetch_compile_include("shop:common/receiver.html", array()); $this->_vars = $_tpl_tpl_vars; unset($_tpl_tpl_vars); ?></td> </tr> </tbody> </table> <table width="100%" cellpadding="0" cellspacing="0"> <tbody> <tr> <td width='100' style='vertical-align:middle;white-space:nowrap;'><h3>配送方式确认<em style="color: red;">*</em></h3></td> <td><div class='division' id='shipping'><div class="notice" >请先“在收货人信息”中选择“收货地区”</div></div></td> </tr> </tbody> </table> <table width="100%" cellpadding="0" cellspacing="0"> <tbody> <tr> <td width='100' style='vertical-align:middle;white-space:nowrap;'><h3>支付方式确认<em style="color: red;">*</em></h3></td> <td> <div class='division'> <div id="_payment_currency" style='padding:5px;'> 货币类型：<?php echo tpl_input_select(array('id' => "payment-cur",'onchange' => "Order.setCurrency(this,event); Order.paymentChange(this);",'name' => "payment[currency]",'rows' => $this->_vars['currencys'],'valueColumn' => "cur_code",'labelColumn' => "cur_name",'value' => $this->_vars['currency'],'class' => "inputstyle",'required' => "true"), $this);?> </div> <div id='payment'> <?php $_tpl_tpl_vars = $this->_vars; echo $this->_fetch_compile_include("shop:common/paymethod.html", array()); $this->_vars = $_tpl_tpl_vars; unset($_tpl_tpl_vars); ?> </div> </div> </td> </tr> </tbody> </table> </div> 