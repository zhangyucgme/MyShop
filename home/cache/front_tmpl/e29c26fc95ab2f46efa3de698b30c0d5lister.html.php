<?php if(!function_exists('tpl_block_area')){ require(CORE_DIR.'/admin/smartyplugin/block.area.php'); } if(!function_exists('tpl_function_pager')){ require(CORE_DIR.'/admin/smartyplugin/function.pager.php'); }  $o = &$this->model; $o->__table_define = array ( 'goods_id' => array ( 'type' => 'number', 'required' => true, 'pkey' => true, 'extra' => 'auto_increment', 'label' => 'ID', 'width' => 110, 'hidden' => true, 'editable' => false, ), 'cat_id' => array ( 'type' => 'object:goods/productCat', 'required' => true, 'default' => 0, 'label' => '分类', 'width' => 75, 'editable' => true, 'filtertype' => 'yes', 'filterdefalut' => true, ), 'type_id' => array ( 'type' => 'object:goods/gtype', 'label' => '类型', 'width' => 75, 'editable' => false, 'filtertype' => 'yes', ), 'goods_type' => array ( 'type' => array ( 'normal' => '普通商品', 'bind' => '捆绑商品', ), 'default' => 'normal', 'required' => true, 'label' => '销售类型', 'width' => 110, 'editable' => false, 'hidden' => true, ), 'brand_id' => array ( 'type' => 'object:goods/brand', 'label' => '品牌', 'width' => 75, 'editable' => true, 'hidden' => true, 'filtertype' => 'yes', 'filterdefalut' => true, ), 'brand' => array ( 'type' => 'varchar(100)', 'label' => '品牌', 'width' => 75, 'editable' => false, ), 'supplier_id' => array ( 'label' => '供应商', 'width' => 100, 'type' => 'int unsigned', 'editable' => false, 'hidden' => true, ), 'supplier_goods_id' => array ( 'type' => 'number', 'editable' => false, 'hidden' => true, ), 'wss_params' => array ( 'type' => 'longtext', 'editable' => false, ), 'image_default' => array ( 'type' => 'longtext', 'label' => '默认图片', 'width' => 75, 'hidden' => true, 'editable' => false, ), 'udfimg' => array ( 'type' => 'bool', 'default' => 'false', 'label' => '是否用户自定义图', 'width' => 110, 'hidden' => true, 'editable' => false, ), 'thumbnail_pic' => array ( 'type' => 'varchar(255)', 'label' => '缩略图', 'width' => 110, 'hidden' => true, 'editable' => false, ), 'small_pic' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'big_pic' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'image_file' => array ( 'type' => 'longtext', 'label' => '图片文件', 'width' => 110, 'hidden' => true, 'editable' => false, ), 'brief' => array ( 'type' => 'varchar(255)', 'label' => '商品简介', 'width' => 110, 'hidden' => false, 'editable' => false, 'filtertype' => 'normal', ), 'intro' => array ( 'type' => 'longtext', 'label' => '详细介绍', 'width' => 110, 'hidden' => true, 'editable' => false, 'filtertype' => 'normal', ), 'mktprice' => array ( 'type' => 'money', 'label' => '市场价', 'width' => 75, 'vtype' => 'positive', 'editable' => false, 'filtertype' => 'number', ), 'cost' => array ( 'type' => 'money', 'default' => '0', 'required' => true, 'label' => '成本价', 'width' => 75, 'editable' => false, 'filtertype' => 'number', ), 'price' => array ( 'type' => 'money', 'default' => '0', 'required' => true, 'label' => '销售价', 'width' => 75, 'vtype' => 'bbsales', 'editable' => false, 'filtertype' => 'number', 'filterdefalut' => true, ), 'bn' => array ( 'type' => 'varchar(200)', 'label' => '商品编号', 'width' => 110, 'fuzzySearch' => 1, 'primary' => true, 'searchtype' => 'head', 'editable' => true, 'filtertype' => 'yes', 'filterdefalut' => true, ), 'name' => array ( 'type' => 'varchar(200)', 'required' => true, 'default' => '', 'label' => '商品名称', 'width' => 310, 'fuzzySearch' => 1, 'primary' => true, 'locked' => 1, 'searchtype' => 'has', 'editable' => true, 'filtertype' => 'custom', 'filterdefalut' => true, 'filtercustom' => array ( 'has' => '包含', 'tequal' => '等于', 'head' => '开头等于', 'foot' => '结尾等于', ), ), 'marketable' => array ( 'type' => 'bool', 'default' => 'true', 'required' => true, 'label' => '上架', 'width' => 30, 'editable' => true, 'filtertype' => 'yes', 'filterdefalut' => true, ), 'weight' => array ( 'type' => 'decimal(20,3)', 'label' => '重量', 'width' => 75, 'editable' => false, ), 'unit' => array ( 'type' => 'varchar(20)', 'label' => '单位', 'width' => 30, 'editable' => false, 'filtertype' => 'normal', ), 'store' => array ( 'type' => 'number', 'label' => '库存', 'width' => 30, 'editable' => false, 'filtertype' => 'number', 'filterdefalut' => true, ), 'store_place' => array ( 'type' => 'varchar(255)', 'label' => '货位', 'width' => 255, 'editable' => false, 'hidden' => true, ), 'score_setting' => array ( 'type' => array ( 'percent' => '百分比', 'number' => '实际值', ), 'default' => 'number', 'editable' => false, ), 'score' => array ( 'type' => 'number', 'label' => '积分', 'width' => 30, 'editable' => false, ), 'spec' => array ( 'type' => 'longtext', 'label' => '规格', 'width' => 110, 'hidden' => true, 'editable' => false, ), 'pdt_desc' => array ( 'type' => 'longtext', 'label' => '物品', 'width' => 110, 'hidden' => true, 'editable' => false, ), 'spec_desc' => array ( 'type' => 'longtext', 'label' => '物品', 'width' => 110, 'hidden' => true, 'editable' => false, ), 'params' => array ( 'type' => 'longtext', 'editable' => false, ), 'uptime' => array ( 'type' => 'time', 'label' => '上架时间', 'width' => 110, 'editable' => false, ), 'downtime' => array ( 'type' => 'time', 'label' => '下架时间', 'width' => 110, 'editable' => false, ), 'last_modify' => array ( 'type' => 'time', 'label' => '更新时间', 'width' => 110, 'editable' => false, ), 'disabled' => array ( 'type' => 'bool', 'default' => 'false', 'required' => true, 'editable' => false, ), 'notify_num' => array ( 'type' => 'number', 'default' => 0, 'required' => true, 'label' => '缺货登记', 'width' => 110, 'editable' => false, ), 'rank' => array ( 'type' => 'decimal(5,3)', 'default' => '5', 'editable' => false, ), 'rank_count' => array ( 'type' => 'int unsigned', 'default' => 0, 'editable' => false, ), 'comments_count' => array ( 'type' => 'int unsigned', 'default' => 0, 'required' => true, 'editable' => false, ), 'view_w_count' => array ( 'type' => 'int unsigned', 'default' => 0, 'required' => true, 'editable' => false, ), 'view_count' => array ( 'type' => 'int unsigned', 'default' => 0, 'required' => true, 'editable' => false, ), 'buy_count' => array ( 'type' => 'int unsigned', 'default' => 0, 'required' => true, 'editable' => false, ), 'buy_w_count' => array ( 'type' => 'int unsigned', 'default' => 0, 'required' => true, 'editable' => false, ), 'count_stat' => array ( 'type' => 'longtext', 'editable' => false, ), 'p_order' => array ( 'type' => 'number', 'default' => 30, 'required' => true, 'label' => '排序', 'width' => 110, 'editable' => false, 'hidden' => true, ), 'd_order' => array ( 'type' => 'number', 'default' => 30, 'required' => true, 'label' => '排序', 'width' => 30, 'editable' => true, ), 'p_1' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_2' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_3' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_4' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_5' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_6' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_7' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_8' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_9' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_10' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_11' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_12' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_13' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_14' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_15' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_16' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_17' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_18' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_19' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_20' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_21' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_22' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_23' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_24' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_25' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_26' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_27' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'p_28' => array ( 'type' => 'varchar(255)', 'editable' => false, ), 'goods_info_update_status' => array ( 'type' => 'bool', 'default' => 'false', 'editable' => false, ), 'stock_update_status' => array ( 'type' => 'bool', 'default' => 'false', 'editable' => false, ), 'marketable_update_status' => array ( 'type' => 'bool', 'default' => 'false', 'editable' => false, ), 'img_update_status' => array ( 'type' => 'bool', 'default' => 'false', 'editable' => false, ), ); if(!function_exists('action_finder_lister')){ require(CORE_INCLUDE_DIR.'/core/action.finder_lister.php'); } action_finder_lister($this); $this->_vars['_finder']['id'] = 'goods_id'; $this->_vars['_finder']['hasTag'] = '1'; echo $this->_fetch_compile_include($this->_vars['_finder']['current_view'],array()); $o = null; $this->_tag_stack[] = array('tpl_block_area', array('inject' => ".mainFoot")); tpl_block_area(array('inject' => ".mainFoot"), null, $this); ob_start();  if( $this->_vars['_finder']['listViews'] ){ ?> <div class="finder-footer" id="finder-footer-<?php echo $this->_vars['_finder']['_name']; ?>"> <?php } ?> <div class='finder-page clearfix'> <div class='span-3'> <span style="cursor: pointer" id="finder-pageset-<?php echo $this->_vars['_finder']['_name']; ?>" dropmenu="finder-pagesel-<?php echo $this->_vars['_finder']['_name']; ?>"> 每页显示 <i><?php echo $this->_vars['_finder']['plimit']; ?></i> 条 <img src="images/transparent.gif" class="imgbundle" style="width:7px;height:5px;background-position:0 -71px;" /> </span> </div> <?php if( $this->_vars['_finder']['pager']['total'] > 1 ){ ?> <div class='span-5'> <form id="finder-pagejump-<?php echo $this->_vars['_finder']['_name']; ?>" class='clearfix' max="<?php echo $this->_vars['_finder']['pager']['total']; ?>"> <div class='span-auto'>跳转到第 <input type="text" class='x-input' style="width:20px; height:1em; padding:0" />页</div> <div class='span-auto'> <em onclick='$(this).getParent("form").fireEvent("submit",{stop:$empty});' class='lnk'><span class='fontcolorBlack'>Go</span></em> </div> </form> </div> <?php } ?> <div class='span-auto'><?php echo tpl_function_pager(array('data' => $this->_vars['_finder']['pager']), $this);?></div> <?php if( $this->_vars['_finder']['statusStr'] ){ ?><div class='span-auto'><?php echo $this->_vars['_finder']['statusStr']; ?></div><?php } ?> <div class='span-auto textright'>共<i><?php echo $this->_vars['_finder']['count']; ?></i>条 <?php if( $this->_vars['finder']['statusStr'] ){ ?><span style="margin-left:150px;"><?php echo $this->_vars['finder']['statusStr']; ?></span><?php } ?> </div> </div> <?php if( $this->_vars['_finder']['listViews'] ){ ?> </div> <?php }  $_block_content = ob_get_contents(); ob_end_clean(); $_block_content = tpl_block_area($this->_tag_stack[count($this->_tag_stack) - 1][1], $_block_content, $this); echo $_block_content; array_pop($this->_tag_stack); $_block_content='';  $this->_tag_stack[] = array('tpl_block_area', array('inject' => ".mainHead")); tpl_block_area(array('inject' => ".mainHead"), null, $this); ob_start(); ?> <div class="finder-tip" id="finder-tip-<?php echo $this->_vars['_finder']['_name']; ?>" count=<?php echo $this->_vars['_finder']['count']; ?> style='display:none;'> <i class='selected'>您当前选定了<em>0</em>条记录，<strong onclick="<?php echo $this->_vars['_finder']['var']; ?>.unselectAll()">点此取消选定</strong>。<strong onclick="<?php echo $this->_vars['_finder']['var']; ?>.selectAll()">点此选定全部</strong>的<span><?php echo $this->_vars['_finder']['count']; ?></span>条记录</i> <i class='selectedall'>您当前选定了全部的<span><?php echo $this->_vars['_finder']['count']; ?></span>条记录，<strong onclick="<?php echo $this->_vars['_finder']['var']; ?>.unselectAll()">点此取消选定</strong>全部记录</i> </div> <?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_content = tpl_block_area($this->_tag_stack[count($this->_tag_stack) - 1][1], $_block_content, $this); echo $_block_content; array_pop($this->_tag_stack); $_block_content=''; ?> <div id="finder-pagesel-<?php echo $this->_vars['_finder']['_name']; ?>" class="x-drop-menu"> <?php foreach ((array)$this->_vars['_finder']['plimit_in_sel'] as $this->_vars['pnumber']){ ?> <div class="item" onclick="<?php echo $this->_vars['_finder']['var']; ?>.request({method:'post',data:{plimit:<?php echo $this->_vars['pnumber']; ?>}})"><input type="radio" <?php if( $this->_vars['_finder']['plimit'] == $this->_vars['pnumber'] ){ ?>checked="checked"<?php } ?> />每页<i><?php echo $this->_vars['pnumber']; ?></i>条</div> <?php } ?> </div> <script>
if($('finder-pagejump-<?php echo $this->_vars['_finder']['_name']; ?>')){
	$('finder-pagejump-<?php echo $this->_vars['_finder']['_name']; ?>').addEvent('submit',function(e){
		e.stop();
		var v = $E('input',this).value.toInt();
		if(v<1)v=1;
		if(v>this.get('max')) v = this.get('max');
		<?php echo $this->_vars['_finder']['var']; ?>.page(v);
	});
}
new DropMenu($('finder-pageset-<?php echo $this->_vars['_finder']['_name']; ?>'),{offset:{y:-115}});
</script>