<?php if(!function_exists('tpl_block_area')){ require(CORE_DIR.'/admin/smartyplugin/block.area.php'); } if(!function_exists('tpl_function_pager')){ require(CORE_DIR.'/admin/smartyplugin/function.pager.php'); }  $o = &$this->model; $o->__table_define = array ( 'member_id' => array ( 'type' => 'number', 'required' => true, 'pkey' => true, 'extra' => 'auto_increment', 'label' => 'ID', 'width' => 110, 'editable' => false, ), 'member_lv_id' => array ( 'required' => true, 'default' => 0, 'label' => '会员等级', 'width' => 75, 'type' => 'object:member/level', 'editable' => true, 'filtertype' => 'bool', 'filterdefalut' => 'true', ), 'uname' => array ( 'type' => 'varchar(50)', 'label' => '用户名', 'width' => 75, 'required' => 1, 'searchtype' => 'head', 'editable' => false, 'filtertype' => 'normal', 'filterdefalut' => 'true', ), 'name' => array ( 'type' => 'varchar(50)', 'label' => '姓名', 'width' => 75, 'searchtype' => 'has', 'editable' => true, 'filtertype' => 'normal', 'filterdefalut' => 'true', ), 'lastname' => array ( 'type' => 'varchar(50)', 'editable' => false, ), 'firstname' => array ( 'type' => 'varchar(50)', 'editable' => false, ), 'password' => array ( 'type' => 'varchar(32)', 'editable' => false, ), 'area' => array ( 'label' => '地区', 'width' => 110, 'type' => 'region', 'editable' => false, 'filtertype' => 'yes', 'filterdefalut' => 'true', ), 'mobile' => array ( 'type' => 'varchar(30)', 'label' => '手机', 'width' => 75, 'fuzzySearch' => 1, 'searchtype' => 'head', 'editable' => true, 'filtertype' => 'normal', 'filterdefalut' => 'true', 'escape_html' => true, ), 'tel' => array ( 'type' => 'varchar(30)', 'label' => '固定电话', 'width' => 110, 'fuzzySearch' => 1, 'searchtype' => 'head', 'editable' => true, 'filtertype' => 'normal', 'filterdefalut' => 'true', 'escape_html' => true, ), 'email' => array ( 'type' => 'varchar(200)', 'label' => 'EMAIL', 'width' => 110, 'required' => 1, 'fuzzySearch' => 1, 'searchtype' => 'has', 'editable' => true, 'filtertype' => 'normal', 'filterdefalut' => 'true', 'escape_html' => true, ), 'zip' => array ( 'type' => 'varchar(20)', 'label' => '邮编', 'width' => 110, 'editable' => true, 'filtertype' => 'normal', 'escape_html' => true, ), 'addr' => array ( 'type' => 'varchar(255)', 'label' => '地址', 'width' => 110, 'editable' => true, 'filtertype' => 'normal', 'escape_html' => true, ), 'province' => array ( 'type' => 'varchar(20)', 'editable' => false, ), 'city' => array ( 'type' => 'varchar(20)', 'editable' => false, ), 'order_num' => array ( 'type' => 'number', 'default' => 0, 'label' => '订单数', 'width' => 110, 'editable' => false, 'hidden' => true, ), 'refer_id' => array ( 'type' => 'varchar(50)', 'label' => '首次来源ID', 'width' => 75, 'editable' => false, 'filtertype' => 'normal', ), 'refer_url' => array ( 'type' => 'varchar(200)', 'label' => '首次来源URL', 'width' => 150, 'editable' => false, 'filtertype' => 'normal', ), 'refer_time' => array ( 'type' => 'time', 'label' => '首次来源时间', 'width' => 110, 'editable' => false, 'filtertype' => 'time', ), 'c_refer_id' => array ( 'type' => 'varchar(50)', 'label' => '本次来源ID', 'width' => 75, 'editable' => false, 'filtertype' => 'normal', ), 'c_refer_url' => array ( 'type' => 'varchar(200)', 'label' => '本次来源URL', 'width' => 150, 'editable' => false, 'filtertype' => 'normal', ), 'c_refer_time' => array ( 'type' => 'time', 'label' => '本次来源时间', 'width' => 110, 'editable' => false, 'filtertype' => 'time', ), 'b_year' => array ( 'type' => 'smallint unsigned', 'width' => 30, 'editable' => false, ), 'b_month' => array ( 'label' => '生月', 'type' => 'tinyint unsigned', 'width' => 30, 'editable' => false, 'hidden' => true, ), 'b_day' => array ( 'label' => '生日', 'type' => 'tinyint unsigned', 'width' => 30, 'editable' => false, 'hidden' => true, ), 'sex' => array ( 'type' => array ( 0 => '女', 1 => '男', ), 'default' => 1, 'required' => true, 'label' => '性别', 'width' => 30, 'editable' => true, 'filtertype' => 'yes', ), 'addon' => array ( 'type' => 'longtext', 'editable' => false, ), 'wedlock' => array ( 'type' => 'intbool', 'default' => 0, 'required' => true, 'editable' => false, ), 'education' => array ( 'type' => 'varchar(30)', 'editable' => false, ), 'vocation' => array ( 'type' => 'varchar(50)', 'editable' => false, ), 'interest' => array ( 'type' => 'longtext', 'editable' => false, ), 'advance' => array ( 'type' => 'money', 'default' => '0.00', 'required' => true, 'label' => '预存款', 'width' => 110, 'searchable' => true, 'editable' => false, 'filtertype' => 'number', ), 'advance_freeze' => array ( 'type' => 'money', 'default' => '0.00', 'required' => true, 'editable' => false, ), 'point_freeze' => array ( 'type' => 'number', 'default' => 0, 'required' => true, 'editable' => false, ), 'point_history' => array ( 'type' => 'number', 'default' => 0, 'required' => true, 'editable' => false, ), 'point' => array ( 'type' => 'number', 'default' => 0, 'required' => true, 'label' => '积分', 'width' => 110, 'searchable' => true, 'editable' => false, 'filtertype' => 'number', ), 'score_rate' => array ( 'type' => 'decimal(5,3)', 'editable' => false, ), 'reg_ip' => array ( 'type' => 'varchar(16)', 'label' => '注册IP', 'width' => 110, 'editable' => false, ), 'regtime' => array ( 'label' => '注册时间', 'width' => 75, 'type' => 'time', 'editable' => false, 'searchable' => true, 'filtertype' => 'number', 'filterdefalut' => 'true', ), 'state' => array ( 'type' => 'tinyint(1)', 'default' => 0, 'required' => true, 'label' => '验证状态', 'width' => 110, 'editable' => false, ), 'pay_time' => array ( 'type' => 'number', 'editable' => false, ), 'biz_money' => array ( 'type' => 'money', 'default' => '0', 'required' => true, 'editable' => false, ), 'pw_answer' => array ( 'type' => 'varchar(250)', 'editable' => false, ), 'pw_question' => array ( 'type' => 'varchar(250)', 'editable' => false, ), 'fav_tags' => array ( 'type' => 'longtext', 'editable' => false, ), 'custom' => array ( 'type' => 'longtext', 'editable' => false, ), 'cur' => array ( 'type' => 'varchar(20)', 'label' => '货币', 'width' => 110, 'editable' => false, ), 'lang' => array ( 'type' => 'varchar(20)', 'label' => '语言', 'width' => 110, 'editable' => false, ), 'unreadmsg' => array ( 'type' => 'smallint unsigned', 'default' => 0, 'required' => true, 'label' => '未读信息', 'width' => 110, 'editable' => false, 'filtertype' => 'number', ), 'disabled' => array ( 'type' => 'bool', 'default' => 'false', 'editable' => false, ), 'remark' => array ( 'width' => 50, 'html' => 'member/remark_row.html', 'label' => '备注', 'searchtype' => 'has', 'editable' => false, 'filtertype' => 'normal', ), 'remark_type' => array ( 'type' => 'varchar(2)', 'default' => 'b1', 'required' => true, 'editable' => false, ), 'login_count' => array ( 'type' => 'int(11)', 'default' => 0, 'required' => true, 'editable' => false, ), 'experience' => array ( 'label' => '经验值', 'type' => 'int(10)', 'default' => 0, 'editable' => false, ), 'foreign_id' => array ( 'type' => 'varchar(255)', ), 'member_refer' => array ( 'type' => 'varchar(50)', 'hidden' => true, 'default' => 'local', ), 'birthday' => array ( 'width' => 100, 'sql' => 'CONCAT(b_year,"-",b_month,"-",b_day)', 'label' => '生日', ), 'attr__11' => array ( 'label' => 'QQ', 'width' => '75', 'custom' => true, 'searchable' => true, 'required' => false, 'type' => 'text', ), 'attr__12' => array ( 'label' => 'MSN', 'width' => '75', 'custom' => true, 'searchable' => true, 'required' => false, 'type' => 'text', ), 'attr__13' => array ( 'label' => 'Skype', 'width' => '75', 'custom' => true, 'searchable' => true, 'required' => false, 'type' => 'text', ), 'attr__14' => array ( 'label' => '旺旺', 'width' => '75', 'custom' => true, 'searchable' => true, 'required' => false, 'type' => 'text', ), ); if(!function_exists('action_finder_lister')){ require(CORE_INCLUDE_DIR.'/core/action.finder_lister.php'); } action_finder_lister($this); $this->_vars['_finder']['id'] = 'member_id'; $this->_vars['_finder']['hasTag'] = '1'; echo $this->_fetch_compile_include($this->_vars['_finder']['current_view'],array()); $o = null; $this->_tag_stack[] = array('tpl_block_area', array('inject' => ".mainFoot")); tpl_block_area(array('inject' => ".mainFoot"), null, $this); ob_start();  if( $this->_vars['_finder']['listViews'] ){ ?> <div class="finder-footer" id="finder-footer-<?php echo $this->_vars['_finder']['_name']; ?>"> <?php } ?> <div class='finder-page clearfix'> <div class='span-3'> <span style="cursor: pointer" id="finder-pageset-<?php echo $this->_vars['_finder']['_name']; ?>" dropmenu="finder-pagesel-<?php echo $this->_vars['_finder']['_name']; ?>"> 每页显示 <i><?php echo $this->_vars['_finder']['plimit']; ?></i> 条 <img src="images/transparent.gif" class="imgbundle" style="width:7px;height:5px;background-position:0 -71px;" /> </span> </div> <?php if( $this->_vars['_finder']['pager']['total'] > 1 ){ ?> <div class='span-5'> <form id="finder-pagejump-<?php echo $this->_vars['_finder']['_name']; ?>" class='clearfix' max="<?php echo $this->_vars['_finder']['pager']['total']; ?>"> <div class='span-auto'>跳转到第 <input type="text" class='x-input' style="width:20px; height:1em; padding:0" />页</div> <div class='span-auto'> <em onclick='$(this).getParent("form").fireEvent("submit",{stop:$empty});' class='lnk'><span class='fontcolorBlack'>Go</span></em> </div> </form> </div> <?php } ?> <div class='span-auto'><?php echo tpl_function_pager(array('data' => $this->_vars['_finder']['pager']), $this);?></div> <?php if( $this->_vars['_finder']['statusStr'] ){ ?><div class='span-auto'><?php echo $this->_vars['_finder']['statusStr']; ?></div><?php } ?> <div class='span-auto textright'>共<i><?php echo $this->_vars['_finder']['count']; ?></i>条 <?php if( $this->_vars['finder']['statusStr'] ){ ?><span style="margin-left:150px;"><?php echo $this->_vars['finder']['statusStr']; ?></span><?php } ?> </div> </div> <?php if( $this->_vars['_finder']['listViews'] ){ ?> </div> <?php }  $_block_content = ob_get_contents(); ob_end_clean(); $_block_content = tpl_block_area($this->_tag_stack[count($this->_tag_stack) - 1][1], $_block_content, $this); echo $_block_content; array_pop($this->_tag_stack); $_block_content='';  $this->_tag_stack[] = array('tpl_block_area', array('inject' => ".mainHead")); tpl_block_area(array('inject' => ".mainHead"), null, $this); ob_start(); ?> <div class="finder-tip" id="finder-tip-<?php echo $this->_vars['_finder']['_name']; ?>" count=<?php echo $this->_vars['_finder']['count']; ?> style='display:none;'> <i class='selected'>您当前选定了<em>0</em>条记录，<strong onclick="<?php echo $this->_vars['_finder']['var']; ?>.unselectAll()">点此取消选定</strong>。<strong onclick="<?php echo $this->_vars['_finder']['var']; ?>.selectAll()">点此选定全部</strong>的<span><?php echo $this->_vars['_finder']['count']; ?></span>条记录</i> <i class='selectedall'>您当前选定了全部的<span><?php echo $this->_vars['_finder']['count']; ?></span>条记录，<strong onclick="<?php echo $this->_vars['_finder']['var']; ?>.unselectAll()">点此取消选定</strong>全部记录</i> </div> <?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_content = tpl_block_area($this->_tag_stack[count($this->_tag_stack) - 1][1], $_block_content, $this); echo $_block_content; array_pop($this->_tag_stack); $_block_content=''; ?> <div id="finder-pagesel-<?php echo $this->_vars['_finder']['_name']; ?>" class="x-drop-menu"> <?php foreach ((array)$this->_vars['_finder']['plimit_in_sel'] as $this->_vars['pnumber']){ ?> <div class="item" onclick="<?php echo $this->_vars['_finder']['var']; ?>.request({method:'post',data:{plimit:<?php echo $this->_vars['pnumber']; ?>}})"><input type="radio" <?php if( $this->_vars['_finder']['plimit'] == $this->_vars['pnumber'] ){ ?>checked="checked"<?php } ?> />每页<i><?php echo $this->_vars['pnumber']; ?></i>条</div> <?php } ?> </div> <script>
if($('finder-pagejump-<?php echo $this->_vars['_finder']['_name']; ?>')){
	$('finder-pagejump-<?php echo $this->_vars['_finder']['_name']; ?>').addEvent('submit',function(e){
		e.stop();
		var v = $E('input',this).value.toInt();
		if(v<1)v=1;
		if(v>this.get('max')) v = this.get('max');
		<?php echo $this->_vars['_finder']['var']; ?>.page(v);
	});
}
new DropMenu($('finder-pageset-<?php echo $this->_vars['_finder']['_name']; ?>'),{offset:{y:-115}});
</script>