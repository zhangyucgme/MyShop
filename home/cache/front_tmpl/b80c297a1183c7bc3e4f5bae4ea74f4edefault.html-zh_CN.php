<?php if(!function_exists('tpl_function_counter')){ require(CORE_DIR.'/include_v5/smartyplugins/function.counter.php'); } ?><div class="GoodsCategoryWrap"> <?php if( $this->_vars['setting']['showCatDepth_default'] == '3' ){ ?> <ul> <?php foreach ((array)$this->_vars['data'] as $this->_vars['parentId'] => $this->_vars['parent']){ ?> <li class="c-cat-depth-1"> <?php if( $this->_vars['setting']['show_selected_node']=='off' && $this->_vars['setting']['virtualcat_id'] ){  }else{ ?> <a href="<?php echo $this->_vars['parent']['url']; ?>"><?php echo $this->_vars['parent']['label']; ?></a> <?php }  if( $this->_vars['parent']['sub'] ){  foreach ((array)$this->_vars['parent']['sub'] as $this->_vars['childId'] => $this->_vars['child']){ ?> <ul> <li class="c-cat-depth-2"> <a href="<?php echo $this->_vars['child']['url']; ?>"><?php echo $this->_vars['child']['label']; ?></a> <?php if( $this->_vars['child']['sub'] ){ ?> <ul> <li class="c-cat-depth-3"> <table> <tbody> <?php if( $this->_vars['setting']['devide'] == '0' ){ ?> <tr><td> <?php $this->_env_vars['foreach'][gchildloop]=array('total'=>count($this->_vars['child']['sub']),'iteration'=>0);foreach ((array)$this->_vars['child']['sub'] as $this->_vars['gChildId'] => $this->_vars['gChild']){ $this->_env_vars['foreach'][gchildloop]['first'] = ($this->_env_vars['foreach'][gchildloop]['iteration']==0); $this->_env_vars['foreach'][gchildloop]['iteration']++; $this->_env_vars['foreach'][gchildloop]['last'] = ($this->_env_vars['foreach'][gchildloop]['iteration']==$this->_env_vars['foreach'][gchildloop]['total']); ?> <a href="<?php echo $this->_vars['gChild']['url']; ?>"><?php echo $this->_vars['gChild']['label']; ?></a> <?php if( !$this->_env_vars['foreach']['gchildloop']['last'] ){  echo $this->_vars['setting']['page_devide'];  }  } unset($this->_env_vars['foreach'][gchildloop]); ?> </td></tr> <?php }else{  echo tpl_function_counter(array('start' => 1,'assign' => "result",'print' => false), $this); foreach ((array)$this->_vars['child']['sub'] as $this->_vars['gChildId'] => $this->_vars['gChild']){  if( ($this->_vars['result'] % $this->_vars['setting']['devide']) == 1 ){ ?> <tr> <td><a href="<?php echo $this->_vars['gChild']['url']; ?>"><?php echo $this->_vars['gChild']['label']; ?></a> <?php echo $this->_vars['setting']['page_devide']; ?></td> <?php }elseif( ($this->_vars['result'] % $this->_vars['setting']['devide']) == 0 ){ ?> <td><a href="<?php echo $this->_vars['gChild']['url']; ?>"><?php echo $this->_vars['gChild']['label']; ?></a> <?php echo $this->_vars['setting']['page_devide']; ?></td> </tr> <?php }else{ ?> <td><a href="<?php echo $this->_vars['gChild']['url']; ?>"><?php echo $this->_vars['gChild']['label']; ?></a> <?php echo $this->_vars['setting']['page_devide']; ?></td> <?php }  echo tpl_function_counter(array('assign' => "result",'print' => false), $this); }  } ?> </tbody> </table> </li> </ul> <?php } ?> </li> </ul> <?php }  } ?> </li> <?php } ?> </ul> <?php }elseif( $this->_vars['setting']['showCatDepth_default'] == '2' ){ ?> <ul> <?php foreach ((array)$this->_vars['data'] as $this->_vars['parentId'] => $this->_vars['parent']){ ?> <li class="c-cat-depth-1"> <?php if( $this->_vars['setting']['show_selected_node']=='off' && $this->_vars['setting']['virtualcat_id'] ){  }else{ ?> <a href="<?php echo $this->_vars['parent']['url']; ?>"><?php echo $this->_vars['parent']['label']; ?></a> <?php }  if( $this->_vars['parent']['sub'] ){ ?> <ul> <li class="c-cat-depth-2"> <table> <tbody> <?php if( $this->_vars['setting']['devide'] == "0" ){ ?> <tr><td> <?php $this->_env_vars['foreach'][childloop]=array('total'=>count($this->_vars['parent']['sub']),'iteration'=>0);foreach ((array)$this->_vars['parent']['sub'] as $this->_vars['childId'] => $this->_vars['child']){ $this->_env_vars['foreach'][childloop]['first'] = ($this->_env_vars['foreach'][childloop]['iteration']==0); $this->_env_vars['foreach'][childloop]['iteration']++; $this->_env_vars['foreach'][childloop]['last'] = ($this->_env_vars['foreach'][childloop]['iteration']==$this->_env_vars['foreach'][childloop]['total']); ?> <a href="<?php echo $this->_vars['child']['url']; ?>"><?php echo $this->_vars['child']['label']; ?></a> <?php if( !$this->_env_vars['foreach']['childloop']['last'] ){  echo $this->_vars['setting']['page_devide'];  }  } unset($this->_env_vars['foreach'][childloop]); ?> </tr></td> <?php }else{  echo tpl_function_counter(array('start' => 1,'assign' => "result",'print' => false), $this); foreach ((array)$this->_vars['parent']['sub'] as $this->_vars['childId'] => $this->_vars['child']){  if( ($this->_vars['result'] % $this->_vars['setting']['devide']) == 1 ){ ?> <tr> <td><a href="<?php echo $this->_vars['child']['url']; ?>"><?php echo $this->_vars['child']['label']; ?></a> <?php echo $this->_vars['setting']['page_devide']; ?></td> <?php }elseif( ($this->_vars['result'] % $this->_vars['setting']['devide']) == 0 ){ ?> <td><a href="<?php echo $this->_vars['child']['url']; ?>"><?php echo $this->_vars['child']['label']; ?></a> <?php echo $this->_vars['setting']['page_devide']; ?></td> </tr> <?php }else{ ?> <td><a href="<?php echo $this->_vars['child']['url']; ?>"><?php echo $this->_vars['child']['label']; ?></a> <?php echo $this->_vars['setting']['page_devide']; ?></td> <?php }  echo tpl_function_counter(array('assign' => "result",'print' => false), $this); }  } ?> </tbody> </table> </li> </ul> <?php } ?> </li> <?php } ?> </ul> <?php }elseif( $this->_vars['setting']['showCatDepth_default'] == '1' ){ ?> <ul> <?php foreach ((array)$this->_vars['data'] as $this->_vars['parentId'] => $this->_vars['parent']){ ?> <li class="c-cat-depth-1"> <a href="<?php echo $this->_vars['parent']['url']; ?>"><?php echo $this->_vars['parent']['label']; ?></a> </li> <?php } ?> </ul> <?php } ?> </div>